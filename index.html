
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Complete Quiz App</title>
<style>
  body {
    font-family: sans-serif;
    padding: 20px;
    max-width: 600px;
    margin: auto;
    font-size: 16px;
  }

  .choice-button {
    display: block;
    margin: 10px 0;
    padding: 10px;
    border-radius: 6px;
    border: 1px solid #ccc;
    background: #f9f9f9;
    cursor: pointer;
    font-size: 1em;
  }

  .choice-button:hover {
    background: #e0e0e0;
  }

  .correct {
    background: #c8e6c9;
  }

  .wrong {
    background: #ffcdd2;
  }

  button {
    margin: 10px 5px;
    padding: 10px 20px;
    font-size: 1em;
  }

  h2, p {
    font-size: 1em;
  }

  /* ‚úÖ Increase font size for smaller screens */
  @media (max-width: 600px) {
    body {
      font-size: 18px;
    }

    h2, p, button, .choice-button {
      font-size: 1.1em;
    }
  }

  @media (max-width: 400px) {
    body {
      font-size: 19px;
    }

    h2, p, button, .choice-button {
      font-size: 1.2em;
    }
  }
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body><header style="display: flex; align-items: center; padding-bottom: 10px;"><img alt="Premier Inn Logo" src="premier-inn-logo.jpg" style="height: 120px;"/></header>
<h2 id="question-number">Question</h2>
<p id="question">Loading...</p>
<div id="choices"></div>
<div id="result"></div>
<p id="progress">Progress: 0 / 0 | ‚úÖ Correct: 0 | ‚ùå Wrong: 0</p>
<button onclick="nextQuestion()">Next</button>
<button onclick="resetQuiz()">Reset</button>
<button onclick="shuffleAndRestart()">üîÄ Shuffle</button>
<button onclick="saveProgress('save1')">Save 1</button>
<button onclick="saveProgress('save2')">Save 2</button>
<button onclick="loadProgress('save1')">Load 1</button>
<button onclick="loadProgress('save2')">Load 2</button>
<button id="exportPdfBtn" onclick="downloadWrongAnswers()">üìÑ Export Wrong Answers</button>
<button id="germanwhilesleep" onclick="germanwhilesleep()">üìÑ learn german while sleeping</button>
<button id="germanshadowing" onclick="germanshadowing()">üìÑ German shadowing speaking</button>
<script src="questions.js"></script>
<script>
let quizData = [];
let originalQuizData = [];
let current = 0;
let wrongAnswers = [];
let totalAnswered = 0;
let correctCount = 0;

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function loadQuestion() {
  const q = quizData[current];
  document.getElementById("question-number").textContent = "Question " + (current + 1);
  document.getElementById("question").textContent = q.question;
  const choicesEl = document.getElementById("choices");
  choicesEl.innerHTML = "";
  q.choices.forEach(choice => {
    const btn = document.createElement("button");
    btn.textContent = choice;
    btn.className = "choice-button";
    btn.onclick = () => {
      totalAnswered++;

      if (choice === q.correct) {
        btn.classList.add("correct");
      correctCount++;
      } else {
        btn.classList.add("wrong");
        wrongAnswers.push({ question: q.question, selected: choice, correct: q.correct });
      updateProgressBar();
      }
      Array.from(choicesEl.children).forEach(b => b.disabled = true);
    };
    choicesEl.appendChild(btn);
  });
}

function nextQuestion() {
  if (current < quizData.length - 1) {
    current++;
    updateProgressBar();
  loadQuestion();
  } else {
    document.getElementById("result").textContent = "Quiz complete!";
  }
}

function resetQuiz() {
  totalAnswered = 0;
  correctCount = 0;
  current = 0;
  wrongAnswers = [];
  document.getElementById("result").textContent = "";
  updateProgressBar();
  loadQuestion();
}

function shuffleAndRestart() {
  quizData = shuffle([...originalQuizData]);
  resetQuiz();
}

function saveProgress(slot) {
  localStorage.setItem("quiz_save_" + slot, JSON.stringify({
    current,
    wrongAnswers,
    correctCount,
    totalAnswered
  }));
  alert("Progress saved to " + slot);
}

function loadProgress(slot) {
  const saved = localStorage.getItem("quiz_save_" + slot);
  if (saved) {
    const data = JSON.parse(saved);
    current = data.current;
    wrongAnswers = data.wrongAnswers || [];
    correctCount = data.correctCount || 0;
    totalAnswered = data.totalAnswered || 0;
    document.getElementById("result").textContent = "";
    updateProgressBar();
    loadQuestion();
  } else {
    alert("No save found in " + slot);
  }
}

window.onload = function () {
  if (typeof quizDataFromFile !== "undefined" && Array.isArray(quizDataFromFile)) {
    quizData = [...quizDataFromFile];
    originalQuizData = [...quizDataFromFile];
    updateProgressBar();
  loadQuestion();
  } else {
    document.getElementById("question").textContent = "Error: quiz data not found.";
  }
};
</script>

<audio id="audioPlayer" controls style="display: none;">
  <source src="your-audio-file.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>
<div style="margin-top: 10px;">
  <button onclick="togglePlayPause()">‚ñ∂Ô∏è Play / ‚è∏Ô∏è Pause</button>
  <button id="loopBtn" onclick="toggleLoop()">üîÅ Loop: Off</button>
  <label for="speedSelect">Speed:</label>
  <select id="speedSelect" onchange="changeSpeed(this.value)">
    <option value="0.5">0.5x</option>
    <option value="1" selected>1x (Normal)</option>
    <option value="1.25">1.25x</option>
    <option value="1.5">1.5x</option>
    <option value="2">2x</option>
  </select>
</div>


</body>
</html>
<script>
function updateProgressBar() {
  const wrongCount = totalAnswered - correctCount;
  document.getElementById("progress").textContent =
    `Progress: ${totalAnswered} / ${quizData.length} | ‚úÖ Correct: ${correctCount} | ‚ùå Wrong: ${wrongCount}`;
}
</script>
<script>
function downloadWrongAnswers() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.setFontSize(12);
  doc.text("Wrong Answers", 10, 10);
  let y = 20;
  wrongAnswers.forEach((entry, idx) => {
    doc.text((idx + 1) + ". " + entry.question, 10, y);
    doc.text("   Your Answer: " + entry.selected, 10, y + 6);
    doc.text("   Correct Answer: " + entry.correct, 10, y + 12);
    y += 20;
    if (y > 270) { doc.addPage(); y = 10; }
  });
  doc.save("wrong_answers.pdf");
}
</script>

<script>
let currentAudio = null;

function germanwhilesleep() {
  playAudio("sleep-audio.mp3");
}

function germanshadowing() {
  playAudio("shadowing-audio.mp3");
}

function playAudio(src) {
  const audio = document.getElementById("audioPlayer");
  const loopState = audio.loop; // Keep current loop state
  const fullSrc = new URL(src, window.location.href).href;
  if (audio.src !== fullSrc) {
    audio.src = src;
    audio.load();
  }
  audio.loop = loopState; // Preserve loop setting
  audio.play();
  currentAudio = audio;
}

function togglePlayPause() {
  const audio = document.getElementById("audioPlayer");
  if (audio.paused) {
    audio.play();
  } else {
    audio.pause();
  }
}

function changeSpeed(value) {
  const audio = document.getElementById("audioPlayer");
  audio.playbackRate = parseFloat(value);
}

function toggleLoop() {
  const audio = document.getElementById("audioPlayer");
  audio.loop = !audio.loop;
  const loopBtn = document.getElementById("loopBtn");
  loopBtn.textContent = audio.loop ? "üîÅ Loop: On" : "üîÅ Loop: Off";
}
</script>

